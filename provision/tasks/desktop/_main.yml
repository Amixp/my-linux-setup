- import_tasks: fonts.yml

- name: Desktop Control tools
  dnf:
    name:
      - python3-psutil
      - gnome-tweak-tool
      - wmctrl
      - dconf-editor
    state: present
  become: true

#- name: Install Gnome extensions
- name: Copy wallpaper file
  copy:
    src: wallpaper.jpg
    dest: "{{ ansible_env.HOME }}/.wallpaper.jpg"
    mode: 0644

- name: Set Wallpaper
  dconf:
    key: "/org/gnome/desktop/background/picture-uri"
    value: "'file://{{ ansible_env.HOME }}/.wallpaper.jpg'"

- name: Set Wallpaper position
  dconf:
    key: "/org/gnome/desktop/background/picture-options"
    value: "'zoom'"

- name: Set Lock screen wallpaper
  dconf:
    key: "/org/gnome/desktop/screensaver/picture-uri"
    value: "'file://{{ ansible_env.HOME }}/.wallpaper.jpg'"

- import_tasks: gnome-extensions.yml
  tags: ["gnome-extensions"]

- import_tasks: settings/gedit.yml
- import_tasks: settings/nautilus.yml
- import_tasks: settings/desktop.yml
  tags: ["settings-desktop"]
- import_tasks: settings/shell.yml
- import_tasks: settings/shortcuts.yml
  tags: ["shortcuts"]
- import_tasks: settings/terminal.yml
- import_tasks: settings/wm.yml
- import_tasks: theme.yml
- import_tasks: autostart.yml
- import_tasks: gnome-extensions-manager.yml
  tags: ["gnome-extensions-manager"]

- name: Remove Pre-installed software
  dnf:
    name:
      - rhytmbox
      - cheese
      - totem
    state: absent
  become: true
